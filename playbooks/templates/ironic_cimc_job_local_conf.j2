enable_plugin ironic https://git.openstack.org/openstack/ironic

ML2_VLAN_RANGES=nexusnet:{{(minvlan|int)+1}}:{{maxvlan}}
OVS_VLAN_RANGES=nexusnet:{{(minvlan|int)+1}}:{{maxvlan}}

ENABLE_TENANT_VLANS=True
OVS_BRIDGE_MAPPINGS=public:br-ex,nexusnet:br-nexusnet
Q_ML2_PLUGIN_MECHANISM_DRIVERS=openvswitch,linuxbridge
Q_ML2_TENANT_NETWORK_TYPE=vlan

# Use this to setup the initial network as a vlan provider network
Q_USE_PROVIDER_NETWORKING=True
PROVIDER_NETWORK_TYPE=vlan
PHYSICAL_NETWORK=nexusnet
SEGMENTATION_ID={{minvlan}}
ALLOCATION_POOL=start=10.1.0.3,end=10.1.0.62

IRONIC_IS_HARDWARE=True
IRONIC_DEPLOY_DRIVER=pxe_iscsi_cimc
IRONIC_HWINFO_FILE={{workspace}}/hardware_info
IRONIC_ENABLED_DRIVERS=fake,pxe_iscsi_cimc
IRONIC_TFTPSERVER_IP=10.1.0.2

[[post-config|$IRONIC_CONF]]
[conductor]
api_url=http://10.1.0.2:6385
